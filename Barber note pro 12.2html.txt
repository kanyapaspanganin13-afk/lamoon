<!doctype html>
<html lang="th" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scale=no">
  <title>Barber Note Pro v12.2</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body{box-sizing:border-box}*{margin:0;padding:0;box-sizing:border-box}:root{--primary:#6366f1;--secondary:#8b5cf6;--success:#10b981;--danger:#ef4444;--warning:#f59e0b;--bg-main:#f8fafc;--bg-card:#fff;--text-main:#1e293b;--text-sub:#64748b;--border:#e2e8f0}.theme-navy{--primary:#1e40af;--bg-main:#0f172a;--bg-card:#1e293b;--text-main:#f1f5f9;--text-sub:#94a3b8;--border:#334155}.theme-dark{--primary:#a78bfa;--bg-main:#18181b;--bg-card:#27272a;--text-main:#fafafa;--text-sub:#a1a1aa;--border:#3f3f46}body{font-family:'Kanit',sans-serif;background:var(--bg-main);color:var(--text-main);min-height:100%;padding-bottom:80px}html,body{height:100%;overflow-x:hidden}.container{max-width:600px;margin:0 auto;padding:0 16px}.header{background:var(--bg-card);padding:20px;text-align:center;border-bottom:2px solid var(--border);box-shadow:0 2px 8px rgba(0,0,0,.1)}.shop-name{font-size:28px;font-weight:700;color:var(--primary)}.quick-actions{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin:16px 0}.quick-btn{background:var(--bg-card);border:2px solid var(--border);border-radius:12px;padding:20px 10px;text-align:center;cursor:pointer;transition:all .3s;box-shadow:0 2px 4px rgba(0,0,0,.1)}.quick-btn:active{transform:scale(.95)}.quick-btn i{font-size:32px;display:block;margin-bottom:8px}.quick-btn.guarantee i{color:var(--warning)}.quick-btn.holiday i{color:#3b82f6}.quick-btn.settings i{color:var(--text-sub)}.quick-btn span{font-size:14px;font-weight:500;color:var(--text-main)}.card{background:var(--bg-card);border-radius:16px;padding:20px;margin:16px 0;box-shadow:0 4px 6px rgba(0,0,0,.1)}.card-title{font-size:18px;font-weight:600;margin-bottom:16px}.form-group{margin-bottom:16px}.form-label{display:block;font-size:14px;font-weight:500;margin-bottom:8px;color:var(--text-sub)}.form-control{width:100%;padding:14px;border:2px solid var(--border);border-radius:12px;font-size:16px;font-family:'Kanit',sans-serif;background:var(--bg-card);color:var(--text-main)}.form-control:focus{outline:0;border-color:var(--primary)}select.form-control{appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12'%3E%3Cpath fill='%2364748b' d='M6 9L1 4h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 14px center;padding-right:40px}.input-thai-date{background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;font-weight:600;text-align:center;cursor:pointer;border:none}.time-grid{display:grid;grid-template-columns:1fr auto 1fr;gap:12px;align-items:end}.time-arrow{font-size:24px;color:var(--primary);padding-bottom:14px}.price-grid{display:grid;grid-template-columns:2fr 1fr;gap:12px}.price-input{font-size:32px;font-weight:700;text-align:center;color:var(--primary)}.payment-btns{display:grid;grid-template-columns:1fr 1fr;gap:12px}.pay-btn{padding:20px;border:3px solid var(--border);border-radius:12px;font-size:18px;font-weight:600;cursor:pointer;background:var(--bg-card);color:var(--text-main);transition:all .3s}.pay-btn.active{border-color:var(--primary);background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;transform:scale(1.05)}.btn-submit{width:100%;padding:18px;background:linear-gradient(135deg,var(--success),#059669);color:#fff;border:none;border-radius:12px;font-size:20px;font-weight:700;cursor:pointer;box-shadow:0 4px 12px rgba(16,185,129,.3)}.btn-submit:active{transform:scale(.98)}.summary-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin:16px 0}.summary-card{background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;padding:20px;border-radius:12px;text-align:center}.summary-label{font-size:14px;opacity:.9;margin-bottom:8px}.summary-value{font-size:28px;font-weight:700}.summary-sub{font-size:12px;opacity:.8;margin-top:4px}.stats-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.stat-item{background:var(--bg-card);border:2px solid var(--border);padding:12px;border-radius:8px;text-align:center}.stat-label{font-size:12px;color:var(--text-sub);margin-bottom:4px}.stat-value{font-size:20px;font-weight:700;color:var(--primary)}.service-tags{display:flex;flex-wrap:wrap;gap:8px;margin:12px 0}.service-tag{padding:8px 16px;border-radius:20px;font-size:14px;font-weight:500}.tag-hair{background:#dbeafe;color:#1e40af}.tag-addon{background:#fce7f3;color:#be185d}.tag-kid{background:#fef3c7;color:#92400e}.timeline{margin:16px 0}.timeline-item{background:var(--bg-card);border:2px solid var(--border);border-radius:12px;padding:16px;margin-bottom:12px}.timeline-header{display:flex;justify-content:space-between;margin-bottom:12px}.timeline-time{font-size:14px;color:var(--text-sub);font-weight:500}.timeline-price{font-size:24px;font-weight:700;color:var(--primary)}.timeline-services{font-size:16px;font-weight:600;margin-bottom:8px}.timeline-footer{display:flex;justify-content:space-between;align-items:center;margin-top:12px;padding-top:12px;border-top:1px solid var(--border)}.timeline-pay{padding:6px 12px;border-radius:6px;font-size:14px;font-weight:500}.pay-cash{background:#dcfce7;color:#166534}.pay-trans{background:#dbeafe;color:#1e40af}.btn-delete{background:#fee2e2;color:#991b1b;border:none;padding:8px 16px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer}.settle-bar{background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;padding:20px;border-radius:12px;margin:16px 0;text-align:center}.settle-bar.positive{background:linear-gradient(135deg,#ef4444,#dc2626)}.settle-bar.negative{background:linear-gradient(135deg,#10b981,#059669)}.settle-label{font-size:14px;opacity:.9;margin-bottom:8px}.settle-amount{font-size:36px;font-weight:700;margin-bottom:8px}.settle-desc{font-size:16px;font-weight:600}.action-btns{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin:16px 0}.btn-action{padding:16px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px}.btn-line{background:#06c755;color:#fff}.btn-archive{background:linear-gradient(135deg,var(--secondary),var(--primary));color:#fff}.balance-display{background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;padding:30px;border-radius:16px;text-align:center;margin:16px 0;position:relative}.balance-indicator{position:absolute;top:16px;right:16px;width:16px;height:16px;border-radius:50%;animation:pulse 2s infinite}@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}.balance-indicator.green{background:#10b981}.balance-indicator.red{background:#ef4444}.balance-indicator.blue{background:#3b82f6}.balance-label{font-size:14px;opacity:.9;margin-bottom:12px}.balance-amount{font-size:48px;font-weight:700;margin-bottom:8px}.balance-status{font-size:16px;font-weight:600}.log-item{background:var(--bg-card);border:2px solid var(--border);border-radius:12px;padding:16px;margin-bottom:12px}.log-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.log-date{font-size:14px;font-weight:600}.log-amount{font-size:20px;font-weight:700}.log-amount.positive{color:#10b981}.log-amount.negative{color:#ef4444}.log-note{font-size:14px;color:var(--text-sub);margin-top:4px}.bottom-nav{position:fixed;bottom:0;left:0;right:0;background:var(--bg-card);border-top:2px solid var(--border);display:grid;grid-template-columns:repeat(3,1fr);padding:8px;box-shadow:0 -2px 8px rgba(0,0,0,.1)}.nav-btn{background:0 0;border:none;padding:12px;cursor:pointer;text-align:center;border-radius:8px;color:var(--text-sub)}.nav-btn.active{background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff}.nav-btn i{font-size:24px;display:block;margin-bottom:4px}.nav-btn span{font-size:12px;font-weight:500}.page{display:none;animation:fadeIn .3s}.page.active{display:block}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.7);z-index:1000}.modal.active{display:flex;align-items:flex-end;justify-content:center}.modal-content{background:var(--bg-card);border-radius:24px 24px 0 0;width:100%;max-width:600px;max-height:90vh;overflow-y:auto;padding:24px;animation:slideUp .3s}@keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.modal-title{font-size:24px;font-weight:700}.modal-close{background:0 0;border:none;font-size:28px;cursor:pointer;color:var(--text-sub);padding:0;width:32px;height:32px}.theme-btns{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}.theme-btn{padding:16px;border:3px solid var(--border);border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;background:var(--bg-card);color:var(--text-main)}.theme-btn.active{border-color:var(--primary);background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff}.toast{position:fixed;top:20px;left:50%;transform:translateX(-50%);background:var(--bg-card);color:var(--text-main);padding:16px 24px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.2);z-index:2000;display:none;border:2px solid var(--border);font-weight:600}.toast.active{display:block;animation:slideDown .3s}@keyframes slideDown{from{transform:translate(-50%,-100%)}to{transform:translate(-50%,0)}}.toast.success{background:#10b981;color:#fff;border-color:#059669}.toast.error{background:#ef4444;color:#fff;border-color:#dc2626}.toast.warning{background:#f59e0b;color:#fff;border-color:#d97706}.empty-state{text-align:center;padding:60px 20px;color:var(--text-sub)}.empty-state i{font-size:64px;margin-bottom:16px;opacity:.5}.empty-state p{font-size:16px}.holiday-badge{display:inline-block;background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;padding:8px 16px;border-radius:20px;font-size:14px;font-weight:600;margin:12px 0}.guarantee-badge{background:linear-gradient(135deg,#10b981,#059669);color:#fff;padding:6px 12px;border-radius:6px;font-size:12px;font-weight:600;display:inline-block}
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div id="toast" class="toast"></div>
  <div class="header">
   <div class="shop-name" id="shopName">
    üíà Barber Pro
   </div>
  </div>
  <div class="container">
   <div id="p1" class="page active">
    <div class="quick-actions">
     <div class="quick-btn guarantee" onclick="claimGuarantee()">
      <i class="fas fa-shield-alt"></i><span>‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</span>
     </div>
     <div class="quick-btn holiday" onclick="setHoliday()">
      <i class="fas fa-umbrella-beach"></i><span>‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</span>
     </div>
     <div class="quick-btn settings" onclick="openSettings()">
      <i class="fas fa-cog"></i><span>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</span>
     </div>
    </div>
    <div class="card">
     <div class="form-group"><label class="form-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô</label> <input type="date" id="entryDate" class="form-control" style="display:none" onchange="updateThaiDate()">
      <div class="form-control input-thai-date" id="thaiDate" onclick="document.getElementById('entryDate').showPicker()">
       ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
      </div>
     </div>
     <div class="time-grid">
      <div class="form-group">
       <label class="form-label">‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°</label><input type="time" id="timeStart" class="form-control">
      </div>
      <div class="time-arrow">
       <i class="fas fa-arrow-right"></i>
      </div>
      <div class="form-group">
       <label class="form-label">‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏ö</label><input type="time" id="timeEnd" class="form-control">
      </div>
     </div>
    </div>
    <div class="card">
     <h3 class="card-title">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h3>
     <div class="form-group"><label class="form-label">‡∏ó‡∏£‡∏á‡∏ú‡∏°</label> <select id="hairStyle" class="form-control"> <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏£‡∏á‡∏ú‡∏° --</option> <option value="‡∏£‡∏≠‡∏á‡∏ó‡∏£‡∏á‡∏™‡∏π‡∏á">‡∏£‡∏≠‡∏á‡∏ó‡∏£‡∏á‡∏™‡∏π‡∏á</option> <option value="‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô">‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô</option> <option value="‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô">‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</option> <option value="‡∏ï‡∏≥‡∏£‡∏ß‡∏à/‡∏ó‡∏´‡∏≤‡∏£">‡∏ï‡∏≥‡∏£‡∏ß‡∏à/‡∏ó‡∏´‡∏≤‡∏£</option> <option value="‡∏™‡∏Å‡∏¥‡∏ô‡πÄ‡∏ü‡∏î">‡∏™‡∏Å‡∏¥‡∏ô‡πÄ‡∏ü‡∏î</option> <option value="‡πÅ‡∏Å‡πâ‡∏ú‡∏°">‡πÅ‡∏Å‡πâ‡∏ú‡∏°</option> <option value="‡πÇ‡∏Å‡∏ô‡∏ú‡∏°">‡πÇ‡∏Å‡∏ô‡∏ú‡∏°</option> <option value="‡πÄ‡∏î‡πá‡∏Å">‡πÄ‡∏î‡πá‡∏Å</option> <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option> </select>
     </div>
     <div class="form-group"><label class="form-label">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡∏¥‡∏° 1</label> <select id="addon1" class="form-control"> <option value="">-- ‡πÑ‡∏°‡πà‡∏°‡∏µ --</option> <option value="‡πÇ‡∏Å‡∏ô‡∏´‡∏ô‡∏ß‡∏î">ü™í ‡πÇ‡∏Å‡∏ô‡∏´‡∏ô‡∏ß‡∏î</option> <option value="‡∏Å‡∏±‡∏ô‡∏´‡∏ô‡πâ‡∏≤">‚ú® ‡∏Å‡∏±‡∏ô‡∏´‡∏ô‡πâ‡∏≤</option> <option value="‡∏™‡∏£‡∏∞‡∏ú‡∏°">üöø ‡∏™‡∏£‡∏∞‡∏ú‡∏°</option> <option value="‡∏¢‡πâ‡∏≠‡∏°‡∏ú‡∏°">üé® ‡∏¢‡πâ‡∏≠‡∏°‡∏ú‡∏°</option> <option value="‡∏î‡∏±‡∏î‡∏ú‡∏°">üåÄ ‡∏î‡∏±‡∏î‡∏ú‡∏°</option> <option value="‡∏´‡∏¢‡∏≠‡∏î‡∏´‡∏π">üëÇ ‡∏´‡∏¢‡∏≠‡∏î‡∏´‡∏π</option> </select>
     </div>
     <div class="form-group"><label class="form-label">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡∏¥‡∏° 2</label> <select id="addon2" class="form-control"> <option value="">-- ‡πÑ‡∏°‡πà‡∏°‡∏µ --</option> <option value="‡πÇ‡∏Å‡∏ô‡∏´‡∏ô‡∏ß‡∏î">ü™í ‡πÇ‡∏Å‡∏ô‡∏´‡∏ô‡∏ß‡∏î</option> <option value="‡∏Å‡∏±‡∏ô‡∏´‡∏ô‡πâ‡∏≤">‚ú® ‡∏Å‡∏±‡∏ô‡∏´‡∏ô‡πâ‡∏≤</option> <option value="‡∏™‡∏£‡∏∞‡∏ú‡∏°">üöø ‡∏™‡∏£‡∏∞‡∏ú‡∏°</option> <option value="‡∏¢‡πâ‡∏≠‡∏°‡∏ú‡∏°">üé® ‡∏¢‡πâ‡∏≠‡∏°‡∏ú‡∏°</option> <option value="‡∏î‡∏±‡∏î‡∏ú‡∏°">üåÄ ‡∏î‡∏±‡∏î‡∏ú‡∏°</option> <option value="‡∏´‡∏¢‡∏≠‡∏î‡∏´‡∏π">üëÇ ‡∏´‡∏¢‡∏≠‡∏î‡∏´‡∏π</option> </select>
     </div>
    </div>
    <div class="card">
     <h3 class="card-title">‡∏£‡∏≤‡∏Ñ‡∏≤</h3>
     <div class="price-grid">
      <div class="form-group">
       <label class="form-label">‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)</label><input type="number" id="price" class="form-control price-input" placeholder="0" min="0">
      </div>
      <div class="form-group">
       <label class="form-label">‡∏ó‡∏¥‡∏õ (‡∏ö‡∏≤‡∏ó)</label><input type="number" id="tip" class="form-control" placeholder="0" min="0">
      </div>
     </div>
    </div>
    <div class="card">
     <h3 class="card-title">‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h3>
     <div class="payment-btns"><button class="pay-btn" id="payCash" onclick="selectPayment('cash')"><i class="fas fa-money-bill-wave"></i> ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</button> <button class="pay-btn" id="payTrans" onclick="selectPayment('trans')"><i class="fas fa-qrcode"></i> ‡∏™‡πÅ‡∏Å‡∏ô‡∏à‡πà‡∏≤‡∏¢</button>
     </div>
    </div><button class="btn-submit" onclick="saveEntry()"><i class="fas fa-check-circle"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
   </div>
   <div id="p2" class="page">
    <div class="summary-grid">
     <div class="summary-card">
      <div class="summary-label">
       ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
      </div>
      <div class="summary-value" id="totalToday">
       ‡∏ø0
      </div>
      <div class="summary-sub">
       <span id="customerCount">0</span> ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
      </div>
     </div>
     <div class="summary-card">
      <div class="summary-label">
       ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ä‡πà‡∏≤‡∏á
      </div>
      <div class="summary-value" id="barberEarn">
       ‡∏ø0
      </div>
      <div class="summary-sub" id="barberSub">
       ‡∏£‡∏ß‡∏°‡∏ó‡∏¥‡∏õ
      </div>
     </div>
    </div>
    <div class="card">
     <h3 class="card-title">‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î</h3>
     <div class="stats-grid">
      <div class="stat-item">
       <div class="stat-label">
        üíµ ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î
       </div>
       <div class="stat-value" id="cashTotal">
        ‡∏ø0
       </div>
      </div>
      <div class="stat-item">
       <div class="stat-label">
        üì± ‡πÇ‡∏≠‡∏ô
       </div>
       <div class="stat-value" id="transTotal">
        ‡∏ø0
       </div>
      </div>
      <div class="stat-item">
       <div class="stat-label">
        üë®‚Äçüé® ‡∏ä‡πà‡∏≤‡∏á
       </div>
       <div class="stat-value" id="barberTotal">
        ‡∏ø0
       </div>
      </div>
      <div class="stat-item">
       <div class="stat-label">
        üè† ‡∏£‡πâ‡∏≤‡∏ô
       </div>
       <div class="stat-value" id="shopTotal">
        ‡∏ø0
       </div>
      </div>
     </div>
    </div>
    <div class="card">
     <h3 class="card-title">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h3>
     <div class="service-tags" id="serviceTags"></div>
    </div>
    <div class="settle-bar" id="settleBar">
     <div class="settle-label">
      ‡∏¢‡∏≠‡∏î‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå
     </div>
     <div class="settle-amount" id="settleAmount">
      ‡∏ø0
     </div>
     <div class="settle-desc" id="settleDesc">
      ‡∏¢‡∏≠‡∏î‡∏û‡∏≠‡∏î‡∏µ
     </div>
    </div>
    <div class="card">
     <h3 class="card-title">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
     <div class="timeline" id="timeline"></div>
    </div>
    <div class="action-btns"><button class="btn-action btn-line" onclick="shareLine()"><i class="fab fa-line"></i> ‡πÅ‡∏ä‡∏£‡πå LINE</button> <button class="btn-action btn-archive" onclick="archiveToday()"><i class="fas fa-save"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</button>
    </div>
   </div>
   <div id="p3" class="page">
    <div class="balance-display">
     <div class="balance-indicator" id="balanceIndicator"></div>
     <div class="balance-label">
      ‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡∏Ñ‡πâ‡∏≤‡∏á
     </div>
     <div class="balance-amount" id="balanceAmount">
      ‡∏ø0
     </div>
     <div class="balance-status" id="balanceStatus">
      ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
     </div>
    </div>
    <div class="card">
     <h3 class="card-title">‡∏™‡∏£‡∏∏‡∏õ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>
     <div class="stats-grid">
      <div class="stat-item">
       <div class="stat-label">
        ‡∏¢‡∏≠‡∏î‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
       </div>
       <div class="stat-value" id="todaySettle">
        ‡∏ø0
       </div>
      </div>
      <div class="stat-item">
       <div class="stat-label">
        ‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥
       </div>
       <div class="stat-value" id="netBalance">
        ‡∏ø0
       </div>
      </div>
     </div>
    </div>
    <div class="card">
     <h3 class="card-title">‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡πÄ‡∏á‡∏¥‡∏ô</h3>
     <div class="form-group">
      <label class="form-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label><input type="date" id="clearDate" class="form-control">
     </div>
     <div class="form-group">
      <label class="form-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó)</label><input type="number" id="clearAmount" class="form-control" placeholder="0">
     </div>
     <div class="form-group">
      <label class="form-label">‡πÇ‡∏ô‡πâ‡∏ï</label><input type="text" id="clearNote" class="form-control" placeholder="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...">
     </div><button class="btn-submit" onclick="clearMoney()"><i class="fas fa-check"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå</button>
    </div>
    <div class="card">
     <h3 class="card-title">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå</h3>
     <div id="clearLogs"></div>
    </div>
   </div>
  </div>
  <div class="bottom-nav"><button class="nav-btn active" onclick="showPage('p1')"><i class="fas fa-edit"></i><span>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</span></button> <button class="nav-btn" onclick="showPage('p2')"><i class="fas fa-chart-line"></i><span>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</span></button> <button class="nav-btn" onclick="showPage('p3')"><i class="fas fa-wallet"></i><span>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</span></button>
  </div>
  <div id="settingsModal" class="modal">
   <div class="modal-content">
    <div class="modal-header">
     <h3 class="modal-title">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</h3><button class="modal-close" onclick="closeSettings()">√ó</button>
    </div>
    <div class="form-group">
     <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô</label><input type="text" id="settingShop" class="form-control" placeholder="üíà Barber Pro">
    </div>
    <div class="form-group">
     <label class="form-label">% ‡∏ä‡πà‡∏≤‡∏á</label><input type="number" id="settingPerc" class="form-control" placeholder="60" min="0" max="100">
    </div>
    <div class="form-group">
     <label class="form-label">‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ (‡∏ö‡∏≤‡∏ó)</label><input type="number" id="settingGuar" class="form-control" placeholder="300" min="0">
    </div>
    <div class="form-group"><label class="form-label">‡∏ò‡∏µ‡∏°‡∏™‡∏µ</label>
     <div class="theme-btns"><button class="theme-btn active" data-theme="light" onclick="setTheme('light')"><i class="fas fa-sun"></i> Light</button> <button class="theme-btn" data-theme="navy" onclick="setTheme('navy')"><i class="fas fa-moon"></i> Navy</button> <button class="theme-btn" data-theme="dark" onclick="setTheme('dark')"><i class="fas fa-star"></i> Dark</button>
     </div>
    </div>
    <div class="form-group"><label class="form-label">‡πÄ‡∏™‡∏µ‡∏¢‡∏á</label>
     <div class="payment-btns"><button class="pay-btn active" id="soundOn" onclick="setSound(true)"><i class="fas fa-volume-up"></i> ‡πÄ‡∏õ‡∏¥‡∏î</button> <button class="pay-btn" id="soundOff" onclick="setSound(false)"><i class="fas fa-volume-mute"></i> ‡∏õ‡∏¥‡∏î</button>
     </div>
    </div><button class="btn-submit" onclick="saveSettings()"><i class="fas fa-save"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</button>
   </div>
  </div>
  <script>
let db=[],conf={shop:'üíà Barber Pro',perc:60,guar:300,theme:'light',sound:true},archives={},account={balance:0,logs:[]},selectedPayment=null,currentPage='p1',guaranteeClaimedToday=false,isHolidayToday=false;function init(){loadData();setCurrentDateTime();updateShopName();applyTheme(conf.theme);renderReport();renderAccount();updateThaiDate();document.getElementById('clearDate').valueAsDate=new Date()}function loadData(){const a=localStorage.getItem('barber_db'),b=localStorage.getItem('barber_conf'),c=localStorage.getItem('barber_archives'),d=localStorage.getItem('barber_account');if(a)db=JSON.parse(a);if(b)conf=JSON.parse(b);if(c)archives=JSON.parse(c);if(d)account=JSON.parse(d);checkTodayStatus()}function saveData(){localStorage.setItem('barber_db',JSON.stringify(db));localStorage.setItem('barber_conf',JSON.stringify(conf));localStorage.setItem('barber_archives',JSON.stringify(archives));localStorage.setItem('barber_account',JSON.stringify(account))}function checkTodayStatus(){const a=getTodayDate(),b=db.filter(e=>e.date===a);guaranteeClaimedToday=b.some(e=>e.type==='GUARANTEE_CLAIM');isHolidayToday=b.some(e=>e.type==='HOLIDAY')}function getTodayDate(){return new Date().toISOString().split('T')[0]}function setCurrentDateTime(){const a=new Date();document.getElementById('entryDate').valueAsDate=a;const b=a.toTimeString().slice(0,5);document.getElementById('timeStart').value=b;const c=new Date(a.getTime()+30*60000);document.getElementById('timeEnd').value=c.toTimeString().slice(0,5)}function updateThaiDate(){const a=document.getElementById('entryDate').value;if(!a)return;const b=new Date(a+'T00:00:00'),c=b.toLocaleDateString('th-TH',{year:'numeric',month:'long',day:'numeric',weekday:'long'});document.getElementById('thaiDate').textContent=c}function showPage(a){document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));document.getElementById(a).classList.add('active');document.querySelectorAll('.nav-btn').forEach(btn=>btn.classList.remove('active'));event.currentTarget.classList.add('active');currentPage=a;if(a==='p2')renderReport();if(a==='p3')renderAccount()}function selectPayment(a){selectedPayment=a;document.getElementById('payCash').classList.remove('active');document.getElementById('payTrans').classList.remove('active');if(a==='cash')document.getElementById('payCash').classList.add('active');else document.getElementById('payTrans').classList.add('active')}function saveEntry(){const a=document.getElementById('entryDate').value,b=document.getElementById('timeStart').value,c=document.getElementById('timeEnd').value,d=document.getElementById('hairStyle').value,e=document.getElementById('addon1').value,f=document.getElementById('addon2').value,g=parseInt(document.getElementById('price').value)||0,h=parseInt(document.getElementById('tip').value)||0;if(!d||g<=0||!selectedPayment){showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô','error');speak('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');return}const i=[e,f].filter(s=>s),j={id:Date.now(),date:a,time:b,endTime:c,svcs:i,hair:d,price:g,tip:h,pay:selectedPayment,type:'HAIRCUT'};db.push(j);saveData();document.getElementById('hairStyle').value='';document.getElementById('addon1').value='';document.getElementById('addon2').value='';document.getElementById('price').value='';document.getElementById('tip').value='';selectedPayment=null;document.getElementById('payCash').classList.remove('active');document.getElementById('payTrans').classList.remove('active');setCurrentDateTime();showToast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!','success');speak('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');showPage('p2');document.querySelectorAll('.nav-btn')[1].classList.add('active')}function claimGuarantee(){if(!conf.guar||conf.guar<=0){showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏Å‡πà‡∏≠‡∏ô','error');speak('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏Å‡πà‡∏≠‡∏ô');openSettings();return}if(guaranteeClaimedToday){showToast('‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏Ñ‡∏•‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß','warning');speak('‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏Ñ‡∏•‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß');return}const a={id:Date.now(),date:getTodayDate(),time:new Date().toTimeString().slice(0,5),endTime:'',svcs:[],hair:'',price:0,tip:0,pay:'cash',type:'GUARANTEE_CLAIM'};db.push(a);guaranteeClaimedToday=true;saveData();showToast(`‡πÄ‡∏Ñ‡∏•‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô ‡∏ø${conf.guar.toLocaleString()} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à`,'success');speak(`‡πÄ‡∏Ñ‡∏•‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô ${conf.guar} ‡∏ö‡∏≤‡∏ó ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à`)}function setHoliday(){if(isHolidayToday){showToast('‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß','warning');return}const a={id:Date.now(),date:getTodayDate(),time:new Date().toTimeString().slice(0,5),endTime:'',svcs:[],hair:'',price:0,tip:0,pay:'cash',type:'HOLIDAY'};db.push(a);isHolidayToday=true;saveData();showToast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à','success');speak('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');renderReport()}function renderReport(){const a=document.getElementById('entryDate').value||getTodayDate(),b=db.filter(e=>e.date===a&&e.type==='HAIRCUT'),c=db.find(e=>e.date===a&&e.type==='HOLIDAY'),d=db.find(e=>e.date===a&&e.type==='GUARANTEE_CLAIM');if(c){document.getElementById('totalToday').textContent='‡∏ø0';document.getElementById('customerCount').textContent='0';document.getElementById('barberEarn').textContent='‡∏ø0';document.getElementById('cashTotal').textContent='‡∏ø0';document.getElementById('transTotal').textContent='‡∏ø0';document.getElementById('barberTotal').textContent='‡∏ø0';document.getElementById('shopTotal').textContent='‡∏ø0';const e=document.getElementById('settleBar');e.className='settle-bar';document.getElementById('settleAmount').textContent='‡∏ø0';document.getElementById('settleDesc').textContent='‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î - ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ';document.getElementById('timeline').innerHTML='<div class="empty-state"><div class="holiday-badge"><i class="fas fa-umbrella-beach"></i> ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</div><p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</p></div>';document.getElementById('serviceTags').innerHTML='<p style="color:var(--text-sub)">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>';return}const f=b.reduce((sum,e)=>sum+e.price,0),g=b.reduce((sum,e)=>sum+e.tip,0),h=b.filter(e=>e.pay==='cash').reduce((sum,e)=>sum+e.price+e.tip,0),i=b.filter(e=>e.pay==='trans').reduce((sum,e)=>sum+e.price+e.tip,0),j=Math.round(f*(conf.perc/100)),k=d?Math.max(j,conf.guar):j,l=k+g,m=f-(l-g),n=h-l;document.getElementById('totalToday').textContent=`‡∏ø${(f+g).toLocaleString()}`;document.getElementById('customerCount').textContent=b.length;document.getElementById('barberEarn').textContent=`‡∏ø${l.toLocaleString()}`;document.getElementById('cashTotal').textContent=`‡∏ø${h.toLocaleString()}`;document.getElementById('transTotal').textContent=`‡∏ø${i.toLocaleString()}`;document.getElementById('barberTotal').textContent=`‡∏ø${l.toLocaleString()}`;document.getElementById('shopTotal').textContent=`‡∏ø${m.toLocaleString()}`;const o=document.getElementById('settleBar'),p=document.getElementById('settleAmount'),q=document.getElementById('settleDesc');p.textContent=`‡∏ø${Math.abs(n).toLocaleString()}`;if(n>0){o.className='settle-bar positive';q.innerHTML='<i class="fas fa-arrow-up"></i> ‡∏ä‡πà‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô‡∏£‡πâ‡∏≤‡∏ô'}else if(n<0){o.className='settle-bar negative';q.innerHTML='<i class="fas fa-arrow-down"></i> ‡∏£‡πâ‡∏≤‡∏ô‡πÇ‡∏≠‡∏ô‡∏ä‡πà‡∏≤‡∏á'}else{o.className='settle-bar';q.innerHTML='<i class="fas fa-check"></i> ‡∏¢‡∏≠‡∏î‡∏û‡∏≠‡∏î‡∏µ'}const r={},s={};let t=0;b.forEach(e=>{if(e.hair){r[e.hair]=(r[e.hair]||0)+1;if(e.hair==='‡πÄ‡∏î‡πá‡∏Å')t++}e.svcs.forEach(sv=>{s[sv]=(s[sv]||0)+1})});let u='';if(b.length>0)u+=`<span class="service-tag tag-hair"><i class="fas fa-cut"></i> ‡∏ï‡∏±‡∏î‡∏ú‡∏°: ${b.length}</span>`;if(t>0)u+=`<span class="service-tag tag-kid"><i class="fas fa-child"></i> ‡πÄ‡∏î‡πá‡∏Å: ${t}</span>`;Object.entries(r).forEach(([hair,count])=>{if(hair!=='‡πÄ‡∏î‡πá‡∏Å')u+=`<span class="service-tag tag-hair">${hair}: ${count}</span>`});Object.entries(s).forEach(([addon,count])=>{u+=`<span class="service-tag tag-addon">${addon}: ${count}</span>`});if(d)u+=`<span class="guarantee-badge"><i class="fas fa-shield-alt"></i> ‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô</span>`;document.getElementById('serviceTags').innerHTML=u||'<p style="color:var(--text-sub)">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>';const v=document.getElementById('timeline');if(b.length===0){v.innerHTML='<div class="empty-state"><i class="fas fa-inbox"></i><p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p></div>'}else{const w=[...b].sort((a,b)=>b.time.localeCompare(a.time));v.innerHTML=w.map(e=>{const x=[e.hair,...e.svcs].filter(Boolean).join(', '),y=e.price+e.tip;return`<div class="timeline-item"><div class="timeline-header"><div class="timeline-time"><i class="fas fa-clock"></i> ${e.time} - ${e.endTime||''}</div><div class="timeline-price">‡∏ø${y.toLocaleString()}</div></div><div class="timeline-services">${x}</div>${e.tip>0?`<div style="color:var(--success);font-size:14px"><i class="fas fa-hand-holding-usd"></i> ‡∏ó‡∏¥‡∏õ ‡∏ø${e.tip.toLocaleString()}</div>`:''}<div class="timeline-footer"><span class="timeline-pay ${e.pay==='cash'?'pay-cash':'pay-trans'}"><i class="fas ${e.pay==='cash'?'fa-money-bill-wave':'fa-qrcode'}"></i> ${e.pay==='cash'?'‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î':'‡∏™‡πÅ‡∏Å‡∏ô‡∏à‡πà‡∏≤‡∏¢'}</span><button class="btn-delete" onclick="deleteEntry(${e.id})"><i class="fas fa-trash"></i> ‡∏•‡∏ö</button></div></div>`}).join('')}const z=document.getElementById('barberSub');if(g>0)z.textContent=`‡∏£‡∏ß‡∏°‡∏ó‡∏¥‡∏õ ‡∏ø${g.toLocaleString()}`;else z.textContent='‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ó‡∏¥‡∏õ'}function deleteEntry(a){db=db.filter(e=>e.id!==a);saveData();renderReport();showToast('‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à','success')}function shareLine(){const a=document.getElementById('entryDate').value||getTodayDate(),b=db.filter(e=>e.date===a&&e.type==='HAIRCUT');if(b.length===0){showToast('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡πÅ‡∏ä‡∏£‡πå','error');return}const c=b.reduce((sum,e)=>sum+e.price,0),d=b.reduce((sum,e)=>sum+e.tip,0),e=b.filter(e=>e.pay==='cash').reduce((sum,e)=>sum+e.price+e.tip,0),f=b.filter(e=>e.pay==='trans').reduce((sum,e)=>sum+e.price+e.tip,0),g=Math.round(c*(conf.perc/100)),h=db.find(e=>e.date===a&&e.type==='GUARANTEE_CLAIM'),i=h?Math.max(g,conf.guar):g,j=i+d,k=c-(j-d),l=e-j,m=new Date(a+'T00:00:00').toLocaleDateString('th-TH',{year:'numeric',month:'long',day:'numeric'});let n='';if(l>0)n=`üî¥ ‡∏ä‡πà‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô‡∏£‡πâ‡∏≤‡∏ô: ‡∏ø${l.toLocaleString()}`;else if(l<0)n=`üü¢ ‡∏£‡πâ‡∏≤‡∏ô‡πÇ‡∏≠‡∏ô‡∏ä‡πà‡∏≤‡∏á: ‡∏ø${Math.abs(l).toLocaleString()}`;else n=`‚úÖ ‡∏¢‡∏≠‡∏î‡∏û‡∏≠‡∏î‡∏µ`;let o=`üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î${m}\n${conf.shop}\n--------------------------\nüí∞ ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°: ‡∏ø${(c+d).toLocaleString()}\nüë• ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: ${b.length} ‡∏Ñ‡∏ô\nüíµ ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î: ‡∏ø${e.toLocaleString()}\nüì± ‡πÇ‡∏≠‡∏ô: ‡∏ø${f.toLocaleString()}\n--------------------------\nüë®‚Äçüé® ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏ö‡πà‡∏á‡∏ä‡πà‡∏≤‡∏á: ‡∏ø${j.toLocaleString()}\nüè† ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏ö‡πà‡∏á‡∏£‡πâ‡∏≤‡∏ô: ‡∏ø${k.toLocaleString()}\n--------------------------\n${n}\n`;if(h)o+=`\nüõ°Ô∏è ‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ ‡∏ø${conf.guar.toLocaleString()}`;const p=`https://line.me/R/msg/text/?${encodeURIComponent(o)}`;window.open(p,'_blank','noopener,noreferrer')}function archiveToday(){const a=document.getElementById('entryDate').value||getTodayDate(),b=db.filter(e=>e.date===a&&e.type==='HAIRCUT');if(b.length===0){showToast('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å','error');return}const c=b.reduce((sum,e)=>sum+e.price,0),d=b.reduce((sum,e)=>sum+e.tip,0),e=b.filter(e=>e.pay==='cash').reduce((sum,e)=>sum+e.price+e.tip,0),f=Math.round(c*(conf.perc/100)),g=db.find(e=>e.date===a&&e.type==='GUARANTEE_CLAIM'),h=g?Math.max(f,conf.guar):f,i=h+d,j=c-(i-d),k=e-i,l={},m={};b.forEach(e=>{if(e.hair)l[e.hair]=(l[e.hair]||0)+1;e.svcs.forEach(s=>m[s]=(m[s]||0)+1)});archives[a]={date:a,total:c+d,barber:i,shop:j,count:b.length,stats:{hairCounts:l,addonCounts:m},settle:k};account.balance+=k;saveData();showToast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!','success');speak('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');showPage('p3');document.querySelectorAll('.nav-btn')[2].classList.add('active');renderAccount()}function renderAccount(){const a=document.getElementById('entryDate').value||getTodayDate(),b=db.filter(e=>e.date===a&&e.type==='HAIRCUT');let c=0;if(b.length>0){const d=b.reduce((sum,e)=>sum+e.price,0),e=b.reduce((sum,e)=>sum+e.tip,0),f=b.filter(e=>e.pay==='cash').reduce((sum,e)=>sum+e.price+e.tip,0),g=Math.round(d*(conf.perc/100)),h=db.find(e=>e.date===a&&e.type==='GUARANTEE_CLAIM'),i=h?Math.max(g,conf.guar):g,j=i+e;c=f-j}const k=account.balance+c;document.getElementById('balanceAmount').textContent=`‡∏ø${Math.abs(account.balance).toLocaleString()}`;document.getElementById('todaySettle').textContent=`‡∏ø${Math.abs(c).toLocaleString()}`;document.getElementById('netBalance').textContent=`‡∏ø${Math.abs(k).toLocaleString()}`;const l=document.getElementById('balanceIndicator'),m=document.getElementById('balanceStatus');if(account.balance>0){l.className='balance-indicator red';m.textContent='‡∏ä‡πà‡∏≤‡∏á‡∏Ñ‡πâ‡∏≤‡∏á‡∏£‡πâ‡∏≤‡∏ô'}else if(account.balance<0){l.className='balance-indicator green';m.textContent='‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡πà‡∏≤‡∏á'}else{l.className='balance-indicator blue';m.textContent='‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô'}const n=document.getElementById('clearLogs');if(account.logs.length===0)n.innerHTML='<div class="empty-state"><i class="fas fa-clipboard-list"></i><p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</p></div>';else{const o=[...account.logs].sort((a,b)=>new Date(b.date)-new Date(a.date));n.innerHTML=o.map(log=>{const p=new Date(log.date+'T00:00:00').toLocaleDateString('th-TH',{day:'numeric',month:'short',year:'numeric'}),q=log.amount>0?'positive':log.amount<0?'negative':'',r=log.amount>0?'+':'';return`<div class="log-item"><div class="log-header"><div class="log-date"><i class="fas fa-calendar"></i> ${p}</div><div class="log-amount ${q}">${r}‡∏ø${Math.abs(log.amount).toLocaleString()}</div></div>${log.note?`<div class="log-note">${log.note}</div>`:''}</div>`}).join('')}}function clearMoney(){const a=document.getElementById('clearDate').value,b=parseInt(document.getElementById('clearAmount').value)||0,c=document.getElementById('clearNote').value;if(!a||b===0){showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô','error');return}account.balance-=b;account.logs.push({date:a,amount:-b,note:c});saveData();renderAccount();document.getElementById('clearAmount').value='';document.getElementById('clearNote').value='';showToast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à','success');speak('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à')}function openSettings(){document.getElementById('settingShop').value=conf.shop;document.getElementById('settingPerc').value=conf.perc;document.getElementById('settingGuar').value=conf.guar;document.querySelectorAll('.theme-btn').forEach(btn=>{btn.classList.toggle('active',btn.dataset.theme===conf.theme)});document.getElementById('soundOn').classList.toggle('active',conf.sound);document.getElementById('soundOff').classList.toggle('active',!conf.sound);document.getElementById('settingsModal').classList.add('active')}function closeSettings(){document.getElementById('settingsModal').classList.remove('active')}function saveSettings(){conf.shop=document.getElementById('settingShop').value||'üíà Barber Pro';conf.perc=parseInt(document.getElementById('settingPerc').value)||60;conf.guar=parseInt(document.getElementById('settingGuar').value)||300;saveData();updateShopName();closeSettings();showToast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à','success');speak('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à')}function updateShopName(){document.getElementById('shopName').textContent=conf.shop}function setTheme(a){conf.theme=a;applyTheme(a);document.querySelectorAll('.theme-btn').forEach(btn=>{btn.classList.toggle('active',btn.dataset.theme===a)})}function applyTheme(a){document.body.classList.remove('theme-light','theme-navy','theme-dark');if(a!=='light')document.body.classList.add(`theme-${a}`)}function setSound(a){conf.sound=a;document.getElementById('soundOn').classList.toggle('active',a);document.getElementById('soundOff').classList.toggle('active',!a)}function speak(a){if(!conf.sound||!('speechSynthesis'in window))return;const b=new SpeechSynthesisUtterance(a);b.lang='th-TH';b.pitch=1.0;b.rate=1.0;speechSynthesis.speak(b)}function showToast(a,b='success'){const c=document.getElementById('toast');c.textContent=a;c.className=`toast ${b} active`;setTimeout(()=>{c.classList.remove('active')},3000)}window.addEventListener('DOMContentLoaded',init);
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c706a12332aa990',t:'MTc2OTkzODA2MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>