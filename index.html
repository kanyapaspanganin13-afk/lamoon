<!doctype html>
<html lang="th" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <title>Barber Note Pro v.1</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
body{box-sizing:border-box}*{margin:0;padding:0;box-sizing:border-box}
:root{--primary:#4E2A84;--primary-light:#6B3FA0;--secondary:#7C4DFF;--success:#00C853;--danger:#D32F2F;--warning:#FF6F00;--bg-main:#F5F5F7;--bg-card:#FFFFFF;--text-main:#1A1A1A;--text-sub:#757575;--border:#E0E0E0;--shadow:0 2px 8px rgba(0,0,0,0.08)}
.theme-navy{--primary:#1A237E;--bg-main:#0A1929;--bg-card:#1E2A38;--text-main:#E3F2FD;--text-sub:#90CAF9;--border:#2C3E50}
.theme-dark{--primary:#BB86FC;--bg-main:#121212;--bg-card:#1E1E1E;--text-main:#FFFFFF;--text-sub:#B0B0B0;--border:#2C2C2C}
body{font-family:'IBM Plex Sans Thai',sans-serif;background:var(--bg-main);color:var(--text-main);min-height:100%;padding-bottom:80px}
html,body{height:100%;overflow-x:hidden}
.container{max-width:600px;margin:0 auto;padding:0 16px}
.header{background:linear-gradient(135deg,var(--primary),var(--primary-light));padding:24px 20px;box-shadow:var(--shadow)}
.shop-name{font-size:20px;font-weight:600;color:#FFF;text-align:left}
.quick-actions{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin:16px 0}
.quick-btn{background:var(--bg-card);border:1px solid var(--border);border-radius:12px;padding:20px 10px;text-align:center;cursor:pointer;transition:all .2s;box-shadow:var(--shadow)}
.quick-btn:active{transform:scale(.95);background:var(--bg-main)}
.quick-btn i{font-size:28px;display:block;margin-bottom:8px}
.quick-btn.guarantee i{color:var(--warning)}
.quick-btn.holiday i{color:#2196F3}
.quick-btn.settings i{color:var(--text-sub)}
.quick-btn span{font-size:13px;font-weight:500;color:var(--text-main)}
.card{background:var(--bg-card);border-radius:16px;padding:20px;margin:16px 0;box-shadow:var(--shadow);border:1px solid var(--border)}
.card-title{font-size:16px;font-weight:600;margin-bottom:16px;color:var(--text-main)}
.form-group{margin-bottom:12px}
.form-control{width:100%;padding:16px;border:1px solid var(--border);border-radius:12px;font-size:16px;font-family:'IBM Plex Sans Thai',sans-serif;background:var(--bg-card);color:var(--text-main);transition:all .2s}
.form-control:focus{outline:0;border-color:var(--primary);box-shadow:0 0 0 3px rgba(78,42,132,0.1)}
.form-control::placeholder{color:var(--text-sub);opacity:0.7}
select.form-control{appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12'%3E%3Cpath fill='%23757575' d='M6 9L1 4h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 16px center;padding-right:40px}
.time-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;align-items:center}
.service-row{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.price-grid{display:grid;grid-template-columns:2fr 1fr;gap:12px}
.price-input{font-size:28px;font-weight:700;text-align:center;color:var(--primary)}
.payment-btns{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.pay-btn{padding:18px;border:2px solid var(--border);border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;background:var(--bg-card);color:var(--text-main);transition:all .2s}
.pay-btn:active{transform:scale(.97)}
.pay-btn.active{border-color:var(--primary);background:var(--primary);color:#FFF}
.btn-submit{width:100%;padding:18px;background:var(--primary);color:#FFF;border:none;border-radius:12px;font-size:18px;font-weight:600;cursor:pointer;box-shadow:0 4px 12px rgba(78,42,132,0.3);transition:all .2s}
.btn-submit:active{transform:scale(.98);background:var(--primary-light)}
.summary-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin:16px 0}
.summary-card{background:linear-gradient(135deg,var(--primary),var(--primary-light));color:#FFF;padding:20px;border-radius:12px;text-align:center}
.summary-label{font-size:13px;opacity:.9;margin-bottom:8px}
.summary-value{font-size:28px;font-weight:700}
.summary-sub{font-size:12px;opacity:.8;margin-top:4px}
.stats-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.stat-item{background:var(--bg-card);border:1px solid var(--border);padding:16px;border-radius:12px;text-align:center}
.stat-label{font-size:12px;color:var(--text-sub);margin-bottom:4px}
.stat-value{font-size:22px;font-weight:700;color:var(--primary)}
.service-tags{display:flex;flex-wrap:wrap;gap:8px;margin:12px 0}
.service-tag{padding:8px 16px;border-radius:20px;font-size:13px;font-weight:500}
.tag-hair{background:#E3F2FD;color:#1565C0}
.tag-addon{background:#FCE4EC;color:#C2185B}
.timeline{margin:16px 0}
.timeline-item{background:var(--bg-card);border:1px solid var(--border);border-radius:12px;padding:16px;margin-bottom:12px}
.timeline-header{display:flex;justify-content:space-between;margin-bottom:12px}
.timeline-time{font-size:13px;color:var(--text-sub);font-weight:500}
.timeline-price{font-size:24px;font-weight:700;color:var(--primary)}
.timeline-services{font-size:15px;font-weight:600;margin-bottom:8px}
.timeline-footer{display:flex;justify-content:space-between;align-items:center;margin-top:12px;padding-top:12px;border-top:1px solid var(--border)}
.timeline-pay{padding:6px 12px;border-radius:6px;font-size:13px;font-weight:500}
.pay-cash{background:#C8E6C9;color:#2E7D32}
.pay-trans{background:#BBDEFB;color:#1565C0}
.btn-delete{background:#FFCDD2;color:#C62828;border:none;padding:8px 16px;border-radius:8px;font-size:13px;font-weight:500;cursor:pointer}
.settle-bar{background:linear-gradient(135deg,var(--primary),var(--primary-light));color:#FFF;padding:20px;border-radius:12px;margin:16px 0;text-align:center}
.settle-bar.positive{background:linear-gradient(135deg,#D32F2F,#C62828)}
.settle-bar.negative{background:linear-gradient(135deg,#00C853,#00A344)}
.settle-label{font-size:13px;opacity:.9;margin-bottom:8px}
.settle-amount{font-size:36px;font-weight:700;margin-bottom:8px}
.settle-desc{font-size:15px;font-weight:600}
.action-btns{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin:16px 0}
.btn-action{padding:16px;border:none;border-radius:12px;font-size:15px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px}
.btn-line{background:#06C755;color:#FFF}
.btn-archive{background:var(--primary);color:#FFF}
.balance-display{background:linear-gradient(135deg,var(--primary),var(--primary-light));color:#FFF;padding:30px;border-radius:16px;text-align:center;margin:16px 0;position:relative}
.balance-indicator{position:absolute;top:16px;right:16px;width:12px;height:12px;border-radius:50%;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
.balance-indicator.green{background:#00C853}
.balance-indicator.red{background:#D32F2F}
.balance-indicator.blue{background:#2196F3}
.log-item{background:var(--bg-card);border:1px solid var(--border);border-radius:12px;padding:16px;margin-bottom:12px}
.log-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.log-date{font-size:13px;font-weight:600}
.log-amount{font-size:20px;font-weight:700}
.log-amount.positive{color:#00C853}
.log-amount.negative{color:#D32F2F}
.log-note{font-size:13px;color:var(--text-sub);margin-top:4px}
.bottom-nav{position:fixed;bottom:0;left:0;right:0;background:var(--bg-card);border-top:1px solid var(--border);display:grid;grid-template-columns:repeat(3,1fr);padding:8px;box-shadow:0 -2px 8px rgba(0,0,0,0.08)}
.nav-btn{background:transparent;border:none;padding:12px;cursor:pointer;text-align:center;border-radius:8px;color:var(--text-sub);transition:all .2s}
.nav-btn.active{background:var(--primary);color:#FFF}
.nav-btn i{font-size:22px;display:block;margin-bottom:4px}
.nav-btn span{font-size:11px;font-weight:500}
.page{display:none;animation:fadeIn .3s}
.page.active{display:block}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.6);z-index:1000}
.modal.active{display:flex;align-items:flex-end;justify-content:center}
.modal-content{background:var(--bg-card);border-radius:24px 24px 0 0;width:100%;max-width:600px;max-height:90%;overflow-y:auto;padding:24px;animation:slideUp .3s}
@keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
.modal-title{font-size:20px;font-weight:700}
.modal-close{background:transparent;border:none;font-size:28px;cursor:pointer;color:var(--text-sub);padding:0;width:32px;height:32px}
.theme-btns{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.theme-btn{padding:16px;border:2px solid var(--border);border-radius:12px;font-size:15px;font-weight:600;cursor:pointer;background:var(--bg-card);color:var(--text-main)}
.theme-btn.active{border-color:var(--primary);background:var(--primary);color:#FFF}
.toast{position:fixed;top:20px;left:50%;transform:translateX(-50%);background:var(--bg-card);color:var(--text-main);padding:16px 24px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.2);z-index:2000;display:none;border:1px solid var(--border);font-weight:600}
.toast.active{display:block;animation:slideDown .3s}
@keyframes slideDown{from{transform:translate(-50%,-100%)}to{transform:translate(-50%,0)}}
.toast.success{background:#00C853;color:#FFF;border-color:#00A344}
.toast.error{background:#D32F2F;color:#FFF;border-color:#C62828}
.toast.warning{background:#FF6F00;color:#FFF;border-color:#E65100}
.empty-state{text-align:center;padding:60px 20px;color:var(--text-sub)}
.empty-state i{font-size:64px;margin-bottom:16px;opacity:.5}
.empty-state p{font-size:15px}
.holiday-badge{display:inline-block;background:linear-gradient(135deg,#FF6F00,#E65100);color:#FFF;padding:8px 16px;border-radius:20px;font-size:13px;font-weight:600;margin:12px 0}
.guarantee-badge{background:linear-gradient(135deg,#00C853,#00A344);color:#FFF;padding:6px 12px;border-radius:6px;font-size:12px;font-weight:600;display:inline-block}
</style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div id="toast" class="toast"></div>
  <div class="header">
   <div class="shop-name" id="shopName">
    üíà Barber Pro
   </div>
  </div>
 <div id="toast" class="toast"></div>
<div class="header">
  <div class="shop-name" id="shopName"> üíà Barber Pro </div>
</div>
<div class="container">
  <div id="p1" class="page active">
    <div class="quick-actions">
      <div class="quick-btn guarantee" onclick="claimGuarantee()">
        <i class="fas fa-shield-alt"></i><span>‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</span>
      </div>
      <div class="quick-btn holiday" onclick="setHoliday()">
        <i class="fas fa-umbrella-beach"></i><span>‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</span>
      </div>
      <div class="quick-btn settings" onclick="openSettings()">
        <i class="fas fa-cog"></i><span>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</span>
      </div>
    </div>
    <div class="card">
      <div class="time-grid">
        <div class="form-group">
          <input type="date" id="entryDate" class="form-control">
        </div>
        <div class="form-group">
          <input type="time" id="timeStart" class="form-control" placeholder="‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°">
        </div>
        <div class="form-group">
          <input type="time" id="timeEnd" class="form-control" placeholder="‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏ö">
        </div>
      </div>
    </div>
    <div class="card">
      <div class="card-title"> ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ </div>
      <div class="service-row">
        <select id="hairStyle" class="form-control">
          <option value="">‡∏ó‡∏£‡∏á‡∏ú‡∏°</option>
          <option value="‡∏£‡∏≠‡∏á‡∏ó‡∏£‡∏á‡∏™‡∏π‡∏á">‡∏£‡∏≠‡∏á‡∏ó‡∏£‡∏á‡∏™‡∏π‡∏á</option>
          <option value="‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô">‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô</option>
          <option value="‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô">‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</option>
          <option value="‡∏ï‡∏≥‡∏£‡∏ß‡∏à/‡∏ó‡∏´‡∏≤‡∏£">‡∏ï‡∏≥‡∏£‡∏ß‡∏à/‡∏ó‡∏´‡∏≤‡∏£</option>
          <option value="‡∏™‡∏Å‡∏¥‡∏ô‡πÄ‡∏ü‡∏î">‡∏™‡∏Å‡∏¥‡∏ô‡πÄ‡∏ü‡∏î</option>
          <option value="‡πÅ‡∏Å‡πâ‡∏ú‡∏°">‡πÅ‡∏Å‡πâ‡∏ú‡∏°</option>
          <option value="‡πÇ‡∏Å‡∏ô‡∏ú‡∏°">‡πÇ‡∏Å‡∏ô‡∏ú‡∏°</option>
          <option value="‡πÄ‡∏î‡πá‡∏Å">‡πÄ‡∏î‡πá‡∏Å</option>
          <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
        </select>
        <select id="addon1" class="form-control">
          <option value="">‡πÄ‡∏™‡∏£‡∏¥‡∏° 1</option>
          <option value="‡πÇ‡∏Å‡∏ô‡∏´‡∏ô‡∏ß‡∏î">ü™í ‡πÇ‡∏Å‡∏ô‡∏´‡∏ô‡∏ß‡∏î</option>
          <option value="‡∏Å‡∏±‡∏ô‡∏´‡∏ô‡πâ‡∏≤">‚ú® ‡∏Å‡∏±‡∏ô‡∏´‡∏ô‡πâ‡∏≤</option>
          <option value="‡∏™‡∏£‡∏∞‡∏ú‡∏°">üöø ‡∏™‡∏£‡∏∞‡∏ú‡∏°</option>
          <option value="‡∏¢‡πâ‡∏≠‡∏°‡∏ú‡∏°">üé® ‡∏¢‡πâ‡∏≠‡∏°‡∏ú‡∏°</option>
          <option value="‡∏î‡∏±‡∏î‡∏ú‡∏°">üåÄ ‡∏î‡∏±‡∏î‡∏ú‡∏°</option>
          <option value="‡∏´‡∏¢‡∏≠‡∏î‡∏´‡∏π">üëÇ ‡∏´‡∏¢‡∏≠‡∏î‡∏´‡∏π</option>
        </select>
        <select id="addon2" class="form-control">
          <option value="">‡πÄ‡∏™‡∏£‡∏¥‡∏° 2</option>
          <option value="‡πÇ‡∏Å‡∏ô‡∏´‡∏ô‡∏ß‡∏î">ü™í ‡πÇ‡∏Å‡∏ô‡∏´‡∏ô‡∏ß‡∏î</option>
          <option value="‡∏Å‡∏±‡∏ô‡∏´‡∏ô‡πâ‡∏≤">‚ú® ‡∏Å‡∏±‡∏ô‡∏´‡∏ô‡πâ‡∏≤</option>
          <option value="‡∏™‡∏£‡∏∞‡∏ú‡∏°">üöø ‡∏™‡∏£‡∏∞‡∏ú‡∏°</option>
          <option value="‡∏¢‡πâ‡∏≠‡∏°‡∏ú‡∏°">üé® ‡∏¢‡πâ‡∏≠‡∏°‡∏ú‡∏°</option>
          <option value="‡∏î‡∏±‡∏î‡∏ú‡∏°">üåÄ ‡∏î‡∏±‡∏î‡∏ú‡∏°</option>
          <option value="‡∏´‡∏¢‡∏≠‡∏î‡∏´‡∏π">üëÇ ‡∏´‡∏¢‡∏≠‡∏î‡∏´‡∏π</option>
        </select>
      </div>
    </div>
    <div class="card">
      <div class="card-title"> ‡∏£‡∏≤‡∏Ñ‡∏≤ </div>
      <div class="price-grid">
        <div class="form-group">
          <input type="number" id="price" class="form-control price-input" placeholder="‡∏ø ‡∏£‡∏≤‡∏Ñ‡∏≤" min="0">
        </div>
        <div class="form-group">
          <input type="number" id="tip" class="form-control" placeholder="‡∏ø ‡∏ó‡∏¥‡∏õ" min="0">
        </div>
      </div>
    </div>
    <div class="card">
      <div class="card-title"> ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô </div>
      <div class="payment-btns">
        <button class="pay-btn" id="payCash" onclick="selectPayment('cash')">
          <i class="fas fa-money-bill-wave"></i> ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î </button>
        <button class="pay-btn" id="payTrans" onclick="selectPayment('trans')">
          <i class="fas fa-qrcode"></i> ‡∏™‡πÅ‡∏Å‡∏ô‡∏à‡πà‡∏≤‡∏¢ </button>
      </div>
    </div>
    <button class="btn-submit" onclick="saveEntry()">
      <i class="fas fa-check-circle"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ </button>
  </div>
  <div id="p2" class="page">
    <div class="summary-grid">
      <div class="summary-card">
        <div class="summary-label"> ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ </div>
        <div class="summary-value" id="totalToday"> ‡∏ø0 </div>
        <div class="summary-sub">
          <span id="customerCount">0</span> ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
        </div>
      </div>
      <div class="summary-card">
        <div class="summary-label"> ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ä‡πà‡∏≤‡∏á </div>
        <div class="summary-value" id="barberEarn"> ‡∏ø0 </div>
        <div class="summary-sub" id="barberSub"> ‡∏£‡∏ß‡∏°‡∏ó‡∏¥‡∏õ </div>
      </div>
    </div>
    <div class="card">
      <h3 class="card-title">‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î</h3>
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-label"> üíµ ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î </div>
          <div class="stat-value" id="cashTotal"> ‡∏ø0 </div>
        </div>
        <div class="stat-item">
          <div class="stat-label"> üì± ‡πÇ‡∏≠‡∏ô </div>
          <div class="stat-value" id="transTotal"> ‡∏ø0 </div>
        </div>
        <div class="stat-item">
          <div class="stat-label"> üë®‚Äçüé® ‡∏ä‡πà‡∏≤‡∏á </div>
          <div class="stat-value" id="barberTotal"> ‡∏ø0 </div>
        </div>
        <div class="stat-item">
          <div class="stat-label"> üè† ‡∏£‡πâ‡∏≤‡∏ô </div>
          <div class="stat-value" id="shopTotal"> ‡∏ø0 </div>
        </div>
      </div>
    </div>
    <div class="card">
      <h3 class="card-title">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h3>
      <div class="service-tags" id="serviceTags"></div>
    </div>
    <div class="settle-bar" id="settleBar">
      <div class="settle-label"> ‡∏¢‡∏≠‡∏î‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå </div>
      <div class="settle-amount" id="settleAmount"> ‡∏ø0 </div>
      <div class="settle-desc" id="settleDesc"> ‡∏¢‡∏≠‡∏î‡∏û‡∏≠‡∏î‡∏µ </div>
    </div>
    <div class="card">
      <h3 class="card-title">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
      <div class="timeline" id="timeline"></div>
    </div>
    <div class="action-btns">
      <button class="btn-action btn-line" onclick="shareLine()">
        <i class="fab fa-line"></i> ‡πÅ‡∏ä‡∏£‡πå LINE </button>
      <button class="btn-action btn-archive" onclick="archiveToday()">
        <i class="fas fa-save"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ </button>
    </div>
  </div>
  <div id="p3" class="page">
    <div class="balance-display">
      <div class="balance-indicator" id="balanceIndicator"></div>
      <div class="balance-label"> ‡∏¢‡∏≠‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡πÄ‡∏î‡∏¥‡∏° </div>
      <div class="balance-amount" id="balanceAmount"> ‡∏ø0 </div>
      <div class="balance-status" id="balanceStatus"> ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô </div>
    </div>
    <div class="card">
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-label"> ‡∏¢‡∏≠‡∏î‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ </div>
          <div class="stat-value" id="todaySettle"> ‡∏ø0 </div>
        </div>
        <div class="stat-item">
          <div class="stat-label"> ‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ </div>
          <div class="stat-value" id="netBalance"> ‡∏ø0 </div>
        </div>
      </div>
    </div>
    <div class="card">
      <h3 class="card-title">‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡πÄ‡∏á‡∏¥‡∏ô</h3>
      <div class="form-group">
        <input type="date" id="clearDate" class="form-control" placeholder="‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà">
      </div>
      <div class="form-group">
        <input type="number" id="clearAmount" class="form-control" placeholder="‡∏ø ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô">
      </div>
      <div class="form-group">
        <input type="text" id="clearNote" class="form-control" placeholder="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...">
      </div>
      <button class="btn-submit" onclick="clearMoney()">
        <i class="fas fa-check"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå </button>
    </div>
    <div class="card">
      <h3 class="card-title">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</h3>
      <div class="form-group">
        <input type="date" id="searchDate" class="form-control" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô">
      </div>
      <div class="form-group">
        <input type="month" id="searchMonth" class="form-control" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô">
      </div>
      <div class="action-btns">
        <button class="btn-action btn-archive" onclick="searchByDate()">
          <i class="fas fa-calendar-day"></i> ‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô </button>
        <button class="btn-action btn-line" onclick="searchByMonth()">
          <i class="fas fa-calendar-alt"></i> ‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô </button>
      </div>
    </div>
    <div class="card">
      <h3 class="card-title">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå</h3>
      <div id="clearLogs"></div>
    </div>
  </div>
</div>
<div class="bottom-nav">
  <button class="nav-btn active" onclick="showPage('p1')">
    <i class="fas fa-edit"></i><span>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</span>
  </button>
  <button class="nav-btn" onclick="showPage('p2')">
    <i class="fas fa-chart-line"></i><span>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</span>
  </button>
  <button class="nav-btn" onclick="showPage('p3')">
    <i class="fas fa-wallet"></i><span>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</span>
  </button>
</div>
<div id="settingsModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 class="modal-title">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</h3>
      <button class="modal-close" onclick="closeSettings()">√ó</button>
    </div>
    <div class="form-group">
      <input type="text" id="settingShop" class="form-control" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô">
    </div>
    <div class="form-group">
      <input type="number" id="settingPerc" class="form-control" placeholder="% ‡∏ä‡πà‡∏≤‡∏á" min="0" max="100">
    </div>
    <div class="form-group">
      <input type="number" id="settingGuar" class="form-control" placeholder="‡∏ø ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ" min="0">
    </div>
    <div class="form-group">
      <div class="card-title"> ‡∏ò‡∏µ‡∏°‡∏™‡∏µ </div>
      <div class="theme-btns">
        <button class="theme-btn active" data-theme="light" onclick="setTheme('light')">
          <i class="fas fa-sun"></i> Light </button>
        <button class="theme-btn" data-theme="navy" onclick="setTheme('navy')">
          <i class="fas fa-moon"></i> Navy </button>
        <button class="theme-btn" data-theme="dark" onclick="setTheme('dark')">
          <i class="fas fa-star"></i> Dark </button>
      </div>
    </div>
    <button class="btn-submit" onclick="saveSettings()">
      <i class="fas fa-save"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ </button>
  </div>
</div>
<div id="reportModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 class="modal-title" id="reportTitle">üìä ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</h3>
      <button class="modal-close" onclick="closeReport()">√ó</button>
    </div>
    <div id="reportContent"></div>
  </div>
</div>
<script>
let db=[],conf={shop:'üíà Barber Pro',perc:60,guar:300,theme:'light'},archives={},account={balance:0,logs:[]},selectedPayment=null,guaranteeClaimedToday=!1,isHolidayToday=!1;
function init(){loadData();setCurrentDateTime();updateShopName();applyTheme(conf.theme);renderReport();renderAccount();document.getElementById('clearDate').valueAsDate=new Date()}
function loadData(){const a=localStorage.getItem('barber_db'),b=localStorage.getItem('barber_conf'),c=localStorage.getItem('barber_archives'),d=localStorage.getItem('barber_account');if(a)db=JSON.parse(a);if(b)conf=JSON.parse(b);if(c)archives=JSON.parse(c);if(d)account=JSON.parse(d);checkTodayStatus()}
function saveData(){localStorage.setItem('barber_db',JSON.stringify(db));localStorage.setItem('barber_conf',JSON.stringify(conf));localStorage.setItem('barber_archives',JSON.stringify(archives));localStorage.setItem('barber_account',JSON.stringify(account))}
function checkTodayStatus(){const a=getTodayDate(),b=db.filter(e=>e.date===a);guaranteeClaimedToday=b.some(e=>e.type==='GUARANTEE_CLAIM');isHolidayToday=b.some(e=>e.type==='HOLIDAY')}
function getTodayDate(){return new Date().toISOString().split('T')[0]}
function setCurrentDateTime(){const a=new Date();document.getElementById('entryDate').valueAsDate=a;const b=a.toTimeString().slice(0,5);document.getElementById('timeStart').value=b;const c=new Date(a.getTime()+30*6e4);document.getElementById('timeEnd').value=c.toTimeString().slice(0,5)}
function showPage(a){document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));document.getElementById(a).classList.add('active');document.querySelectorAll('.nav-btn').forEach(btn=>btn.classList.remove('active'));event.currentTarget.classList.add('active');if(a==='p2')renderReport();if(a==='p3')renderAccount()}
function selectPayment(a){selectedPayment=a;document.getElementById('payCash').classList.remove('active');document.getElementById('payTrans').classList.remove('active');if(a==='cash')document.getElementById('payCash').classList.add('active');else document.getElementById('payTrans').classList.add('active')}
function saveEntry(){const a=document.getElementById('entryDate').value,b=document.getElementById('timeStart').value,c=document.getElementById('timeEnd').value,d=document.getElementById('hairStyle').value,e=document.getElementById('addon1').value,f=document.getElementById('addon2').value,g=parseInt(document.getElementById('price').value)||0,h=parseInt(document.getElementById('tip').value)||0;if(!d||g<=0||!selectedPayment){showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô','error');return}const i=[e,f].filter(s=>s);db.push({id:Date.now(),date:a,time:b,endTime:c,svcs:i,hair:d,price:g,tip:h,pay:selectedPayment,type:'HAIRCUT'});saveData();document.getElementById('hairStyle').value='';document.getElementById('addon1').value='';document.getElementById('addon2').value='';document.getElementById('price').value='';document.getElementById('tip').value='';selectedPayment=null;document.getElementById('payCash').classList.remove('active');document.getElementById('payTrans').classList.remove('active');setCurrentDateTime();showToast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!','success');showPage('p2');document.querySelectorAll('.nav-btn')[1].classList.add('active')}
function claimGuarantee(){if(!conf.guar||conf.guar<=0){showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏Å‡πà‡∏≠‡∏ô','error');openSettings();return}if(guaranteeClaimedToday){showToast('‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏Ñ‡∏•‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß','warning');return}db.push({id:Date.now(),date:getTodayDate(),time:new Date().toTimeString().slice(0,5),endTime:'',svcs:[],hair:'',price:0,tip:0,pay:'cash',type:'GUARANTEE_CLAIM'});guaranteeClaimedToday=!0;saveData();showToast(`‡πÄ‡∏Ñ‡∏•‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô ‡∏ø${conf.guar.toLocaleString()} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à`,'success')}
function setHoliday(){if(isHolidayToday){showToast('‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß','warning');return}db.push({id:Date.now(),date:getTodayDate(),time:new Date().toTimeString().slice(0,5),endTime:'',svcs:[],hair:'',price:0,tip:0,pay:'cash',type:'HOLIDAY'});isHolidayToday=!0;saveData();showToast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à','success');renderReport()}
function calcEarnings(entries){const f=entries.reduce((s,e)=>s+e.price,0),g=entries.reduce((s,e)=>s+e.tip,0),h=entries.filter(e=>e.pay==='cash').reduce((s,e)=>s+e.price+e.tip,0),i=entries.filter(e=>e.pay==='trans').reduce((s,e)=>s+e.price+e.tip,0);let k,useG=!1;if(f<conf.guar){k=conf.guar;useG=!0}else{k=Math.round(f*(conf.perc/100))}const l=k+g,m=f-k,n=h-l;return{totalPrice:f,totalTip:g,cash:h,transfer:i,barberEarn:l,shopEarn:m,settle:n,useGuarantee:useG}}
function renderReport(){const a=document.getElementById('entryDate').value||getTodayDate(),b=db.filter(e=>e.date===a&&e.type==='HAIRCUT'),c=db.find(e=>e.date===a&&e.type==='HOLIDAY');if(c){document.getElementById('totalToday').textContent='‡∏ø0';document.getElementById('customerCount').textContent='0';document.getElementById('barberEarn').textContent='‡∏ø0';document.getElementById('cashTotal').textContent='‡∏ø0';document.getElementById('transTotal').textContent='‡∏ø0';document.getElementById('barberTotal').textContent='‡∏ø0';document.getElementById('shopTotal').textContent='‡∏ø0';document.getElementById('settleBar').className='settle-bar';document.getElementById('settleAmount').textContent='‡∏ø0';document.getElementById('settleDesc').textContent='‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î - ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ';document.getElementById('timeline').innerHTML='<div class="empty-state"><div class="holiday-badge"><i class="fas fa-umbrella-beach"></i> ‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î</div><p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</p></div>';document.getElementById('serviceTags').innerHTML='<p style="color:var(--text-sub)">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>';return}const{totalPrice:f,totalTip:g,cash:h,transfer:i,barberEarn:l,shopEarn:m,settle:n,useGuarantee:useG}=calcEarnings(b);document.getElementById('totalToday').textContent=`‡∏ø${(f+g).toLocaleString()}`;document.getElementById('customerCount').textContent=b.length;document.getElementById('barberEarn').textContent=`‡∏ø${l.toLocaleString()}`;document.getElementById('cashTotal').textContent=`‡∏ø${h.toLocaleString()}`;document.getElementById('transTotal').textContent=`‡∏ø${i.toLocaleString()}`;document.getElementById('barberTotal').textContent=`‡∏ø${l.toLocaleString()}`;document.getElementById('shopTotal').textContent=`‡∏ø${m.toLocaleString()}`;const o=document.getElementById('settleBar');document.getElementById('settleAmount').textContent=`‡∏ø${Math.abs(n).toLocaleString()}`;if(n>0){o.className='settle-bar positive';document.getElementById('settleDesc').innerHTML='<i class="fas fa-arrow-up"></i> ‡∏ä‡πà‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô‡∏£‡πâ‡∏≤‡∏ô'}else if(n<0){o.className='settle-bar negative';document.getElementById('settleDesc').innerHTML='<i class="fas fa-arrow-down"></i> ‡∏£‡πâ‡∏≤‡∏ô‡πÇ‡∏≠‡∏ô‡∏ä‡πà‡∏≤‡∏á'}else{o.className='settle-bar';document.getElementById('settleDesc').innerHTML='<i class="fas fa-check"></i> ‡∏¢‡∏≠‡∏î‡∏û‡∏≠‡∏î‡∏µ'}const r={};b.forEach(e=>{if(e.hair)r[e.hair]=(r[e.hair]||0)+1;e.svcs.forEach(sv=>r[sv]=(r[sv]||0)+1)});let u='';if(b.length>0)u+=`<span class="service-tag tag-hair"><i class="fas fa-cut"></i> ‡∏ï‡∏±‡∏î‡∏ú‡∏°: ${b.length}</span>`;Object.entries(r).forEach(([s,c])=>u+=`<span class="service-tag ${s.includes('ü™í')||s.includes('‚ú®')||s.includes('üöø')||s.includes('üé®')||s.includes('üåÄ')||s.includes('üëÇ')?'tag-addon':'tag-hair'}">${s}: ${c}</span>`);if(useG)u+=`<span class="guarantee-badge"><i class="fas fa-shield-alt"></i> ‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô ‡∏ø${conf.guar.toLocaleString()}</span>`;document.getElementById('serviceTags').innerHTML=u||'<p style="color:var(--text-sub)">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>';const v=document.getElementById('timeline');if(b.length===0)v.innerHTML='<div class="empty-state"><i class="fas fa-inbox"></i><p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p></div>';else{v.innerHTML=[...b].sort((a,b)=>b.time.localeCompare(a.time)).map(e=>`<div class="timeline-item"><div class="timeline-header"><div class="timeline-time"><i class="fas fa-clock"></i> ${e.time} - ${e.endTime||''}</div><div class="timeline-price">‡∏ø${(e.price+e.tip).toLocaleString()}</div></div><div class="timeline-services">${[e.hair,...e.svcs].filter(Boolean).join(', ')}</div>${e.tip>0?`<div style="color:var(--success);font-size:14px"><i class="fas fa-hand-holding-usd"></i> ‡∏ó‡∏¥‡∏õ ‡∏ø${e.tip.toLocaleString()}</div>`:''}<div class="timeline-footer"><span class="timeline-pay ${e.pay==='cash'?'pay-cash':'pay-trans'}"><i class="fas ${e.pay==='cash'?'fa-money-bill-wave':'fa-qrcode'}"></i> ${e.pay==='cash'?'‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î':'‡∏™‡πÅ‡∏Å‡∏ô‡∏à‡πà‡∏≤‡∏¢'}</span><button class="btn-delete" onclick="deleteEntry(${e.id})"><i class="fas fa-trash"></i> ‡∏•‡∏ö</button></div></div>`).join('')}document.getElementById('barberSub').textContent=g>0?`‡∏£‡∏ß‡∏°‡∏ó‡∏¥‡∏õ ‡∏ø${g.toLocaleString()}`:'‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ó‡∏¥‡∏õ'}
function deleteEntry(a){db=db.filter(e=>e.id!==a);saveData();renderReport();showToast('‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à','success')}
function shareLine(){const a=document.getElementById('entryDate').value||getTodayDate(),b=db.filter(e=>e.date===a&&e.type==='HAIRCUT');if(b.length===0){showToast('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡πÅ‡∏ä‡∏£‡πå','error');return}const{totalPrice:f,totalTip:g,cash:h,transfer:i,barberEarn:l,shopEarn:m,settle:n,useGuarantee:useG}=calcEarnings(b),dt=new Date(a+'T00:00:00').toLocaleDateString('th-TH',{year:'numeric',month:'long',day:'numeric'});let s=n>0?`üî¥ ‡∏ä‡πà‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô‡∏£‡πâ‡∏≤‡∏ô: ‡∏ø${n.toLocaleString()}`:n<0?`üü¢ ‡∏£‡πâ‡∏≤‡∏ô‡πÇ‡∏≠‡∏ô‡∏ä‡πà‡∏≤‡∏á: ‡∏ø${Math.abs(n).toLocaleString()}`:`‚úÖ ‡∏¢‡∏≠‡∏î‡∏û‡∏≠‡∏î‡∏µ`,txt=`üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î${dt}\n${conf.shop}\n--------------------------\nüí∞ ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°: ‡∏ø${(f+g).toLocaleString()}\nüë• ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: ${b.length} ‡∏Ñ‡∏ô\nüíµ ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î: ‡∏ø${h.toLocaleString()}\nüì± ‡πÇ‡∏≠‡∏ô: ‡∏ø${i.toLocaleString()}\n--------------------------\nüë®‚Äçüé® ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏ö‡πà‡∏á‡∏ä‡πà‡∏≤‡∏á: ‡∏ø${l.toLocaleString()}\nüè† ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏ö‡πà‡∏á‡∏£‡πâ‡∏≤‡∏ô: ‡∏ø${m.toLocaleString()}\n--------------------------\n${s}\n`;if(useG)txt+=`\nüõ°Ô∏è ‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ ‡∏ø${conf.guar.toLocaleString()}`;window.open(`https://line.me/R/msg/text/?${encodeURIComponent(txt)}`,'_blank','noopener,noreferrer')}
function archiveToday(){const a=document.getElementById('entryDate').value||getTodayDate(),b=db.filter(e=>e.date===a&&e.type==='HAIRCUT');if(b.length===0){showToast('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å','error');return}const{totalPrice:f,totalTip:g,cash:h,transfer:i,barberEarn:l,shopEarn:m,settle:n,useGuarantee:useG}=calcEarnings(b),hc={},ac={};b.forEach(e=>{if(e.hair)hc[e.hair]=(hc[e.hair]||0)+1;e.svcs.forEach(s=>ac[s]=(ac[s]||0)+1)});archives[a]={date:a,totalIncome:f+g,totalPrice:f,totalTip:g,barberEarning:l,shopEarning:m,cash:h,transfer:i,customerCount:b.length,hairCounts:hc,addonCounts:ac,settle:n,useGuarantee:useG,guaranteeAmount:useG?conf.guar:0};account.balance+=n;saveData();showToast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!','success');showPage('p3');document.querySelectorAll('.nav-btn')[2].classList.add('active');renderAccount()}
function renderAccount(){const a=document.getElementById('entryDate').value||getTodayDate(),b=db.filter(e=>e.date===a&&e.type==='HAIRCUT');let c=0;if(b.length>0)c=calcEarnings(b).settle;const k=account.balance+c;document.getElementById('balanceAmount').textContent=`‡∏ø${Math.abs(account.balance).toLocaleString()}`;document.getElementById('todaySettle').textContent=`‡∏ø${Math.abs(c).toLocaleString()}`;document.getElementById('netBalance').textContent=`‡∏ø${Math.abs(k).toLocaleString()}`;const l=document.getElementById('balanceIndicator'),m=document.getElementById('balanceStatus');if(account.balance>0){l.className='balance-indicator red';m.textContent='‡∏ä‡πà‡∏≤‡∏á‡∏Ñ‡πâ‡∏≤‡∏á‡∏£‡πâ‡∏≤‡∏ô'}else if(account.balance<0){l.className='balance-indicator green';m.textContent='‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡πà‡∏≤‡∏á'}else{l.className='balance-indicator blue';m.textContent='‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô'}const n=document.getElementById('clearLogs');if(account.logs.length===0)n.innerHTML='<div class="empty-state"><i class="fas fa-clipboard-list"></i><p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</p></div>';else n.innerHTML=[...account.logs].sort((a,b)=>new Date(b.date)-new Date(a.date)).map(log=>`<div class="log-item"><div class="log-header"><div class="log-date"><i class="fas fa-calendar"></i> ${new Date(log.date+'T00:00:00').toLocaleDateString('th-TH',{day:'numeric',month:'short',year:'numeric'})}</div><div class="log-amount ${log.amount>0?'positive':log.amount<0?'negative':''}">${log.amount>0?'+':''}‡∏ø${Math.abs(log.amount).toLocaleString()}</div></div>${log.note?`<div class="log-note">${log.note}</div>`:''}</div>`).join('')}
function clearMoney(){const a=document.getElementById('clearDate').value,b=parseInt(document.getElementById('clearAmount').value)||0,c=document.getElementById('clearNote').value;if(!a||b===0){showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô','error');return}account.balance-=b;account.logs.push({date:a,amount:-b,note:c});saveData();renderAccount();document.getElementById('clearAmount').value='';document.getElementById('clearNote').value='';showToast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à','success')}
function searchByDate(){const a=document.getElementById('searchDate').value;if(!a){showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà','error');return}const b=archives[a];if(!b){showToast('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ','warning');return}const c=new Date(a+'T00:00:00').toLocaleDateString('th-TH',{year:'numeric',month:'long',day:'numeric',weekday:'long'});let d=`<div class="card"><h3 style="text-align:center;margin-bottom:20px">${c}</h3><div class="summary-grid"><div class="summary-card"><div class="summary-label">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°</div><div class="summary-value">‡∏ø${b.totalIncome.toLocaleString()}</div><div class="summary-sub">${b.customerCount} ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</div></div><div class="summary-card"><div class="summary-label">‡∏ä‡πà‡∏≤‡∏á</div><div class="summary-value">‡∏ø${b.barberEarning.toLocaleString()}</div><div class="summary-sub">‡∏£‡πâ‡∏≤‡∏ô ‡∏ø${b.shopEarning.toLocaleString()}</div></div></div><div class="stats-grid"><div class="stat-item"><div class="stat-label">üí∞ ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ï‡∏±‡∏î‡∏ú‡∏°</div><div class="stat-value">‡∏ø${b.totalPrice.toLocaleString()}</div></div><div class="stat-item"><div class="stat-label">üíµ ‡∏ó‡∏¥‡∏õ</div><div class="stat-value">‡∏ø${b.totalTip.toLocaleString()}</div></div><div class="stat-item"><div class="stat-label">üíµ ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</div><div class="stat-value">‡∏ø${b.cash.toLocaleString()}</div></div><div class="stat-item"><div class="stat-label">üì± ‡πÇ‡∏≠‡∏ô</div><div class="stat-value">‡∏ø${b.transfer.toLocaleString()}</div></div></div><div class="settle-bar ${b.settle>0?'positive':b.settle<0?'negative':''}"><div class="settle-label">‡∏¢‡∏≠‡∏î‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå</div><div class="settle-amount">‡∏ø${Math.abs(b.settle).toLocaleString()}</div>${b.settle>0?'<div class="settle-desc"><i class="fas fa-arrow-up"></i> ‡∏ä‡πà‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô‡∏£‡πâ‡∏≤‡∏ô</div>':b.settle<0?'<div class="settle-desc"><i class="fas fa-arrow-down"></i> ‡∏£‡πâ‡∏≤‡∏ô‡πÇ‡∏≠‡∏ô‡∏ä‡πà‡∏≤‡∏á</div>':'<div class="settle-desc"><i class="fas fa-check"></i> ‡∏¢‡∏≠‡∏î‡∏û‡∏≠‡∏î‡∏µ</div>'}</div>`;if(b.useGuarantee)d+=`<div style="margin-top:20px;padding:16px;background:#FFF3E0;border-radius:12px;text-align:center"><span class="guarantee-badge"><i class="fas fa-shield-alt"></i> ‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ ‡∏ø${b.guaranteeAmount.toLocaleString()}</span></div>`;d+=`</div>`;document.getElementById('reportTitle').innerHTML=`üìä ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô`;document.getElementById('reportContent').innerHTML=d;document.getElementById('reportModal').classList.add('active')}
function searchByMonth(){const a=document.getElementById('searchMonth').value;if(!a){showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô','error');return}const b=Object.values(archives).filter(arc=>arc.date.startsWith(a));if(b.length===0){showToast('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ','warning');return}const c=new Date(a+'-01T00:00:00').toLocaleDateString('th-TH',{year:'numeric',month:'long'}),d=b.reduce((s,arc)=>s+arc.totalIncome,0),e=b.reduce((s,arc)=>s+arc.totalPrice,0),f=b.reduce((s,arc)=>s+arc.totalTip,0),g=b.reduce((s,arc)=>s+arc.barberEarning,0),h=b.reduce((s,arc)=>s+arc.shopEarning,0),i=b.reduce((s,arc)=>s+arc.cash,0),j=b.reduce((s,arc)=>s+arc.transfer,0),k=b.reduce((s,arc)=>s+arc.customerCount,0),l=b.reduce((s,arc)=>s+arc.settle,0),o=b.filter(arc=>arc.useGuarantee).length;let p=`<div class="card"><h3 style="text-align:center;margin-bottom:20px">${c}</h3><div class="summary-grid"><div class="summary-card"><div class="summary-label">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°</div><div class="summary-value">‡∏ø${d.toLocaleString()}</div><div class="summary-sub">${k} ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</div></div><div class="summary-card"><div class="summary-label">‡∏ä‡πà‡∏≤‡∏á</div><div class="summary-value">‡∏ø${g.toLocaleString()}</div><div class="summary-sub">‡∏£‡πâ‡∏≤‡∏ô ‡∏ø${h.toLocaleString()}</div></div></div><div class="stats-grid"><div class="stat-item"><div class="stat-label">üí∞ ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ï‡∏±‡∏î‡∏ú‡∏°</div><div class="stat-value">‡∏ø${e.toLocaleString()}</div></div><div class="stat-item"><div class="stat-label">üíµ ‡∏ó‡∏¥‡∏õ</div><div class="stat-value">‡∏ø${f.toLocaleString()}</div></div><div class="stat-item"><div class="stat-label">üíµ ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</div><div class="stat-value">‡∏ø${i.toLocaleString()}</div></div><div class="stat-item"><div class="stat-label">üì± ‡πÇ‡∏≠‡∏ô</div><div class="stat-value">‡∏ø${j.toLocaleString()}</div></div></div><div class="settle-bar ${l>0?'positive':l<0?'negative':''}"><div class="settle-label">‡∏¢‡∏≠‡∏î‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏£‡∏ß‡∏°</div><div class="settle-amount">‡∏ø${Math.abs(l).toLocaleString()}</div>${l>0?'<div class="settle-desc"><i class="fas fa-arrow-up"></i> ‡∏ä‡πà‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô‡∏£‡πâ‡∏≤‡∏ô</div>':l<0?'<div class="settle-desc"><i class="fas fa-arrow-down"></i> ‡∏£‡πâ‡∏≤‡∏ô‡πÇ‡∏≠‡∏ô‡∏ä‡πà‡∏≤‡∏á</div>':'<div class="settle-desc"><i class="fas fa-check"></i> ‡∏¢‡∏≠‡∏î‡∏û‡∏≠‡∏î‡∏µ</div>'}</div><div class="stats-grid"><div class="stat-item"><div class="stat-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</div><div class="stat-value">${b.length}</div></div><div class="stat-item"><div class="stat-label">‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢/‡∏ß‡∏±‡∏ô</div><div class="stat-value">‡∏ø${Math.round(d/b.length).toLocaleString()}</div></div></div>`;if(o>0)p+=`<div style="margin-top:20px;padding:16px;background:#FFF3E0;border-radius:12px;text-align:center"><span class="guarantee-badge"><i class="fas fa-shield-alt"></i> ‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô ${o} ‡∏ß‡∏±‡∏ô</span></div>`;p+=`</div>`;document.getElementById('reportTitle').innerHTML=`üìä ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô`;document.getElementById('reportContent').innerHTML=p;document.getElementById('reportModal').classList.add('active')}
function closeReport(){document.getElementById('reportModal').classList.remove('active')}
function openSettings(){document.getElementById('settingShop').value=conf.shop;document.getElementById('settingPerc').value=conf.perc;document.getElementById('settingGuar').value=conf.guar;document.querySelectorAll('.theme-btn').forEach(btn=>btn.classList.toggle('active',btn.dataset.theme===conf.theme));document.getElementById('settingsModal').classList.add('active')}
function closeSettings(){document.getElementById('settingsModal').classList.remove('active')}
function saveSettings(){conf.shop=document.getElementById('settingShop').value||'üíà Barber Pro';conf.perc=parseInt(document.getElementById('settingPerc').value)||60;conf.guar=parseInt(document.getElementById('settingGuar').value)||300;saveData();updateShopName();closeSettings();showToast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à','success')}
function updateShopName(){document.getElementById('shopName').textContent=conf.shop}
function setTheme(a){conf.theme=a;applyTheme(a);document.querySelectorAll('.theme-btn').forEach(btn=>btn.classList.toggle('active',btn.dataset.theme===a))}
function applyTheme(a){document.body.classList.remove('theme-light','theme-navy','theme-dark');if(a!=='light')document.body.classList.add(`theme-${a}`)}
function showToast(a,b='success'){const c=document.getElementById('toast');c.textContent=a;c.className=`toast ${b} active`;setTimeout(()=>c.classList.remove('active'),3e3)}
window.addEventListener('DOMContentLoaded',init);
</script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c7194c821b9705c',t:'MTc2OTk1MDI5Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
